<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>ferror: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ferror
   &#160;<span id="projectnumber">1.3.1</span>
   </div>
   <div id="projectbrief">FERROR is a library to assist with error handling in Fortran projects.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Types&#160;List</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ferror Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="intro_sec"></a>
Introduction</h1>
<p>FERROR is a library to assist with error handling in Fortran projects. The error handling capabilities also have been extended to be called from C thereby providing both an error handling mechanism for C projects as well as allowing C interop with Fortran projects that use this library to handle errors.</p>
<dl class="section user"><dt>Example</dt><dd>The following piece of code offers a simple introduction to the use of this library. <div class="fragment"><div class="line"><span class="keyword">program</span> example</div><div class="line">    <span class="keywordtype">use </span><a class="code" href="namespaceferror.html">ferror</a></div><div class="line">    use, <span class="keywordtype">intrinsic</span> :: iso_fortran_env, only : int32</div><div class="line">    <span class="keywordtype">implicit none</span></div><div class="line"></div><div class="line">    <span class="comment">! Variables</span></div><div class="line">    <span class="keywordtype">type</span>(<a class="code" href="structferror_1_1errors.html">errors</a>) :: err_mgr</div><div class="line"></div><div class="line">    <span class="comment">! Ensure the error reporting doesn&#39;t terminate the application.  The default</span></div><div class="line">    <span class="comment">! behavior terminates the application.</span></div><div class="line">    <span class="keyword">call </span>err_mgr%set_exit_on_error(.false.)</div><div class="line"></div><div class="line">    <span class="comment">! Don&#39;t print the error message to the command line.  The default behavior</span></div><div class="line">    <span class="comment">! prints the error information to the command line.</span></div><div class="line">    <span class="keyword">call </span>err_mgr%set_suppress_printing(.true.)</div><div class="line"></div><div class="line">    <span class="comment">! Call the routine that causes the error</span></div><div class="line">    <span class="keyword">call </span>causes_error(err_mgr)</div><div class="line"></div><div class="line">    <span class="comment">! Print the error information</span></div><div class="line">    print <span class="stringliteral">&#39;(A)&#39;</span>, <span class="stringliteral">&quot;An error occurred in the following subroutine: &quot;</span> // &amp;</div><div class="line">        err_mgr%get_error_fcn_name()</div><div class="line">    print <span class="stringliteral">&#39;(A)&#39;</span>, <span class="stringliteral">&quot;The error message is: &quot;</span> // err_mgr%get_error_message()</div><div class="line">    print <span class="stringliteral">&#39;(AI0)&#39;</span>, <span class="stringliteral">&quot;The error code is: &quot;</span>, err_mgr%get_error_flag()</div><div class="line"><span class="keyword">contains</span></div><div class="line"></div><div class="line"><span class="comment">! The purpose of this subroutine is to simply trigger an error condition.</span></div><div class="line"><span class="keyword">subroutine </span>causes_error(err)</div><div class="line">    <span class="comment">! Arguments</span></div><div class="line">    <span class="keywordtype">class</span>(<a class="code" href="structferror_1_1errors.html">errors</a>), <span class="keywordtype">intent(inout)</span> :: err</div><div class="line"></div><div class="line">    <span class="comment">! Define an error flag</span></div><div class="line">    <span class="keywordtype">integer(int32)</span>, <span class="keywordtype">parameter</span> :: error_flag = 200</div><div class="line"></div><div class="line">    <span class="comment">! Trigger the error condition</span></div><div class="line">    <span class="keyword">call </span>err%report_error(&amp;</div><div class="line">        <span class="stringliteral">&quot;causes_error&quot;</span>, &amp;                   <span class="comment">! The subroutine or function name</span></div><div class="line">        <span class="stringliteral">&quot;This is a test error message.&quot;</span>, &amp;  <span class="comment">! The error message.</span></div><div class="line">        error_flag)                         <span class="comment">! The error flag</span></div><div class="line"><span class="keyword">end subroutine</span></div><div class="line"></div><div class="line"><span class="keyword">end program</span></div></div><!-- fragment --></dd></dl>
<dl class="section user"><dt></dt><dd>The above program produces the following output. <div class="fragment"><div class="line">An error occurred in the following subroutine: causes_error</div><div class="line">The error message is: This is a test error message.</div><div class="line">The error code is: 200</div></div><!-- fragment --></dd></dl>
<dl class="section user"><dt></dt><dd>The above program also creates a log file. The log file is titled error_log.txt by default, but can be named whatever by the user. The contents of the file written from the above program are as follows. <div class="fragment"><div class="line">***** ERROR *****</div><div class="line">1/2/2018; 16:49:40</div><div class="line">Function: causes_error</div><div class="line">Error Flag: 200</div><div class="line">Message:</div><div class="line">This is a test error message.</div></div><!-- fragment --></dd></dl>
<dl class="section user"><dt></dt><dd>If additional errors are encountered, the information is simply appended to the end of the file.</dd></dl>
<dl class="section user"><dt></dt><dd>The same example above can be written in C. The C implementation is as follows. <div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><span class="preprocessor">#include &quot;ferror.h&quot;</span></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> causes_error(errorhandler *err);</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>) {</div><div class="line">    <span class="comment">// Variables</span></div><div class="line">    errorhandler err_mgr;</div><div class="line">    <span class="keywordtype">char</span> fname[256], msg[256];</div><div class="line">    <span class="keywordtype">int</span> flag, fnamelength = 256, msglength = 256;</div><div class="line"></div><div class="line">    <span class="comment">// Initialization</span></div><div class="line">    <a class="code" href="namespaceferror__c__binding.html#ae95be2b49f450a8c2a72e7d56fb09cc8">alloc_errorhandler</a>(&amp;err_mgr);</div><div class="line"></div><div class="line">    <span class="comment">// Ensure the error reporting doesn&#39;t terminate the application</span></div><div class="line">    <a class="code" href="namespaceferror__c__binding.html#a38aee8abbaa0d4a78561c07cb79126d5">set_exit_on_error</a>(&amp;err_mgr, <span class="keyword">false</span>);</div><div class="line"></div><div class="line">    <span class="comment">// Don&#39;t print the error message to the command line</span></div><div class="line">    <a class="code" href="namespaceferror__c__binding.html#a8e10477dd847c95ae0ae5416729b37a3">set_suppress_printing</a>(&amp;err_mgr, <span class="keyword">true</span>);</div><div class="line"></div><div class="line">    <span class="comment">// Call the routine that causes the error</span></div><div class="line">    causes_error(&amp;err_mgr);</div><div class="line"></div><div class="line">    <span class="comment">// Retrieve the error information</span></div><div class="line">    <a class="code" href="namespaceferror__c__binding.html#a8d1a72071feddcbca0b9c10ef6cec765">get_error_fcn_name</a>(&amp;err_mgr, fname, &amp;fnamelength);</div><div class="line">    <a class="code" href="namespaceferror__c__binding.html#a30e23a417eb7bf9ea5d227bf890efa1a">get_error_message</a>(&amp;err_mgr, msg, &amp;msglength);</div><div class="line">    flag = <a class="code" href="namespaceferror__c__binding.html#a409f193998b052acd3f159161e9c2a4f">get_error_flag</a>(&amp;err_mgr);</div><div class="line"></div><div class="line">    <span class="comment">// Print the error information</span></div><div class="line">    printf(<span class="stringliteral">&quot;An error occurred in the following subroutine: %s\nThe error message is: %s\nThe error code is: %i\n&quot;</span>,</div><div class="line">        fname, msg, flag);</div><div class="line"></div><div class="line">    <span class="comment">// End</span></div><div class="line">    <a class="code" href="namespaceferror__c__binding.html#afea3aada2ef296f31afecd9bc5ea5461">free_errorhandler</a>(&amp;err_mgr);</div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> causes_error(errorhandler *err) {</div><div class="line">    <a class="code" href="namespaceferror__c__binding.html#aa1f5de4c0d20bcd1f6eb397fdf9c3fa4">report_error</a>(err,                       <span class="comment">// The errorhandler object</span></div><div class="line">        <span class="stringliteral">&quot;causes_error&quot;</span>,                     <span class="comment">// The function name</span></div><div class="line">        <span class="stringliteral">&quot;This is a test error message.&quot;</span>,    <span class="comment">// The error message</span></div><div class="line">        200);                               <span class="comment">// The error flag</span></div><div class="line">}</div></div><!-- fragment --></dd></dl>
<dl class="section user"><dt></dt><dd>The above C program produces exactly the same output as the Fortran example. </dd></dl>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
